function parseDomString(domStr){return document.createRange().createContextualFragment(domStr)}function convertFromString(attribute){if("true"===attribute)return!0;if("false"===attribute)return!1;const num=Number(attribute);if(!isNaN(num))return num;try{return JSON.parse(attribute)}catch(e){return attribute}}function convertToString(attribute){if(!0===attribute)return"true";if(!1===attribute)return"false";if(!isNaN(attribute))return attribute.toString();try{return JSON.stringify(attribute)}catch(e){return attribute}}var nextId=0;export function extendComponent(clazz,attributes=[]){return document._componentRegistry||(document._componentRegistry={}),Object.defineProperty(clazz,"observedAttributes",{get:function(){return attributes}}),attributes.forEach(attribute=>{Object.defineProperty(clazz.prototype,attribute,{get:function(){return convertFromString(this.getAttribute(attribute))},set:function(newValue){const convertedAttribute=convertToString(newValue);return this.setAttribute(attribute,convertedAttribute)}})}),clazz.prototype.attributeChangedCallback=function(name,oldValue,newValue){"function"==typeof clazz.prototype.propertyChangedCallback&&clazz.prototype.propertyChangedCallback.call(this,name,convertFromString(oldValue),convertFromString(newValue))},clazz.prototype.setState=function(stateUpdate){this.state=this.state?{...this.state,...stateUpdate}:{...stateUpdate},this.render(this.state)},clazz.prototype.registerComponent=function(){this._id=++nextId,document._componentRegistry[this._id]=this,this.disconnectedCallback=function(){this.unregisterComponent()}},clazz.prototype.unregisterComponent=function(){delete document._componentRegistry[this._id]},clazz.prototype.getHandlerRef=function(handler,...params){return`return document._componentRegistry[${this._id}]['${handler.name}'](event${params.length?", "+params.map((componentId=this._id,function(param){document._componentRegistry[componentId]._parameterRegistry.push(param);const paramIndex=document._componentRegistry[componentId]._parameterRegistry.length-1;return`document._componentRegistry[${componentId}]._parameterRegistry[${paramIndex}]`})).join(","):""})`;var componentId},clazz.prototype.resetParameterRegistry=function(){this._id&&document._componentRegistry&&(document._componentRegistry[this._id]._parameterRegistry=[])},clazz.prototype._render=clazz.prototype.render,clazz.prototype.render=function(...args){this.resetParameterRegistry(),"function"==typeof this._render&&this._render(...args)},clazz.prototype.html=function(newDomStr){"function"==typeof this.componentWillUpdate&&this.componentWillUpdate(),morphdom(this,parseDomString(newDomStr),{childrenOnly:!0}),"function"==typeof this.componentDidUpdate&&this.componentDidUpdate()},clazz.prototype.renderChildComponent=function(componentTag){let component=this.querySelector(componentTag);return component||(component=new(window.customElements.get(componentTag))).render(),component.outerHTML},clazz.prototype.randomizeCssClass=function(cssClass){return this._cssClasses||(this._cssClasses={}),this._cssClasses[cssClass]?this._cssClasses[cssClass]:(this._cssClasses[cssClass]=cssClass+"_"+getRandomString(6),this._cssClasses[cssClass])},clazz};export function getAnimationClass(currentState,prevState,classList){return currentState?prevState?classList[2]:classList[2]+" "+classList[1]:prevState?classList[2]+" "+classList[3]:classList[0]};function getRandomString(length){for(var text="",possible="abcdefghijklmnopqrstuvwxyz",i=1;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}export function sanitizeString(str){var temp=document.createElement("div");return temp.textContent=str,temp.innerHTML};